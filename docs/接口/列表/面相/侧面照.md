# 接口名称
侧面照分析 
接口编码：face-side
# 接口描述
本接口对患者标准侧面照片进行AI分析，自动识别并标记面部关键解剖标志点（如软组织鼻根点、鼻下点、颏前点等），并计算出相关的面部突度、角度等测量数据。
**使用场景建议：**

- **颌面畸形初筛：** 快速评估患者是否存在上颌前突、下颌后缩等常见的颌面发育问题。
- **正畸/正颌方案设计：** 为医生提供患者侧貌的客观数据，辅助制定改善脸型轮廓的治疗方案，并预测软组织变化。
- **治疗前后效果对比：** 通过对治疗前后的侧面照进行量化分析，向患者直观、科学地展示治疗带来的脸型轮廓改善效果。

**注意事项：**

- 请确保上传的侧面照光线均匀，五官轮廓清晰。
- 患者需保持自然放松表情，牙齿处于自然咬合状态，双唇轻轻闭合。
- 头部姿态需尽量摆正。
# 请求URL
`POST https://api-dev.cloud.hailijia.cn/engine/v2/face/face-side`
# 请求头
|      参数       |    说明     |         值         |
| :-----------: | :-------: | :---------------: |
| Content-Type  | 指定请求信息的格式 | application/json  |
| Authorization |  身份鉴权信息   | [鉴权](/docs/入门/鉴权) |
**示例：**
```json
{
"Content-Type":"application/json",
"Authorization":"APPCODE 3F2504E04F8911D39A0C0305E82C3301"
}
```
# 输入定义

|     参数      |   类型   |                说明                 |
| :---------: | :----: | :-------------------------------: |
|     sid     | String | 唯一ID可以传入任意String，用于回调查询等操作，请确保唯一性 |
| rawData.url | String |          图像的公网地址请保证链接可用           |
|  callback   | Object |           [回调](/入门/回调)            |
# 输入示例
```json
{  
  "sid": "{{$guid}}",  
  "rawData": {  
    "url": "https://XXXXXX.jpg"  
  },  
  "callback": [  
    {  
      "type": "rabbitmq",  
      "out": "aaaaa"  
    }  
  ]  
}
````


# 输出定义
|            参数            |   类型   |                             说明                             |
| :----------------------: | :----: | :--------------------------------------------------------: |
|           sid            | String |             唯一ID可以传入任意String，用于回调查询等操作，请确保唯一性              |
|           code           |  Int   |                     接口返回code码，HTTP状态码                      |
|          errMsg          | String |                           接口错误信息                           |
|          result          | Object |                         返回的详细数据对象                          |
|    result.rawData.url    | Object |                          图片远程URL                           |
|        result.kpi        | Object |                       根据点结合医学计算出来的指标                       |
|     result.landmark      | Object |                          计算出来的点坐标                          |
| result.metadata.alignImg | String |                           图像调整大小                           |
|   result.metadata.attr   | Object | 图像原始宽度（original_width）图像原始高度（original_height）图像缩放比例（scale） |
|  result.metadata.isTurn  | String |                            是否旋转                            |
# landmark中包含元素说明
|  字段   |  类型  | 说明  |
| :---: | :--: | :-: |
|   A   | Arry | 关键点 |
|   C   | Arry | 关键点 |
|  CM   | Arry | 关键点 |
|  EYE  | Arry | 关键点 |
|   G   | Arry | 关键点 |
|  GN   | Arry | 关键点 |
|  LI   | Arry | 关键点 |
|  LL   | Arry | 关键点 |
|  LS   | Arry | 关键点 |
|  ME   | Arry | 关键点 |
|   N   | Arry | 关键点 |
|  OR   | Arry | 关键点 |
|  POG  | Arry | 关键点 |
|  PRN  | Arry | 关键点 |
| PRN_b | Arry | 关键点 |
| PRN_t | Arry | 关键点 |
|  SI   | Arry | 关键点 |
|  SN   | Arry | 关键点 |
| STMI  | Arry | 关键点 |
| STMS  | Arry | 关键点 |
|  TRG  | Arry | 关键点 |
|  UL   | Arry | 关键点 |
# 关键点图示例
![image.png](https://code-liuhao.oss-cn-hangzhou.aliyuncs.com/hlj-docs/20250616150430.png)

# kpi中包含元素说明
|          字段           |  类型   |      KPI中文名称      |
| :-------------------: | :---: | :---------------: |
|     POG-Plumbline     | Float |      颏前点-铅垂线      |
|       bi_e_jiao       | Float |        鼻额角        |
|      bijianjiao       | Float |        鼻尖角        |
|   face_convex_angle   | Float | 面凸角-面型（G-Sn-Pog'） |
|     kechungoujiao     | Float |       刻唇沟角        |
|      kejingjiao       | Float |        颏颈角        |
|         ll_ep         | Float |     下唇与E线位置关系     |
| lower_lip_inclination | Float |       下唇倾角        |
|   nasolabial_angle    | Float |        鼻唇角        |
|    quanmiantujiao     | Float |       全面突角        |
|    shangchunaojiao    | Float |       上唇凹角        |
|   shangchunketujiao   | Float |       上唇颏突角       |
|     shangsanjiao      | Float |        上三角        |
|        stoner         | Float |       面型-面角       |
|         ul_ep         | Float |     上唇与E线位置关系     |
| upper_lip_inclination | Float |       上唇倾角        |
|    xiachunketujiao    | Float |       下唇颏突角       |
|      xiasanjiao       | Float |        下三角        |
|        z_angle        | Float |      唇颏前后向协调      |

# 输出示例
```json
{  
    "code": 0,  
    "errMsg": null,  
    "result": {  
        "kpi": {  
            "POG-Plumbline": 36.07,  
            "bi_e_jiao": 149.74,  
            "bijianjiao": 95.55,  
            "face_convex_angle": 27.68,  
            "kechungoujiao": 138.63,  
            "kejingjiao": 129.72,  
            "ll_ep": 31.02,  
            "lower_lip_inclination": 28.41,  
            "nasolabial_angle": 106.83,  
            "quanmiantujiao": 138.54,  
            "shangchunaojiao": 178.89,  
            "shangchunketujiao": 16.03,  
            "shangsanjiao": 21.98,  
            "stoner": 73.49,  
            "ul_ep": 26.35,  
            "upper_lip_inclination": 73.49,  
            "xiachunketujiao": 11.93,  
            "xiasanjiao": 19.49,  
            "z_angle": 43.29  
        },  
        "landmark": {  
            "A": [  
                843,  
                920  
            ],  
            "C": [  
                634,  
                1148  
            ],  
            "CM": [  
                855,  
                892  
            ],  
            "EYE": [  
                726,  
                756  
            ],  
            "G": [  
                814,  
                684  
            ],  
            "GN": [  
                751,  
                1097  
            ],  
            "LI": [  
                836,  
                1005  
            ],  
            "LL": [  
                827,  
                1018  
            ],  
            "LS": [  
                849,  
                968  
            ],  
            "ME": [  
                729,  
                1116  
            ],  
            "N": [  
                808,  
                737  
            ],  
            "OR": [  
                789,  
                800  
            ],  
            "POG": [  
                773,  
                1072  
            ],  
            "PRN": [  
                868,  
                873  
            ],  
            "PRN_b": [  
                1007.096551724138,  
                1620.0  
            ],  
            "PRN_t": [  
                705.4413793103454,  
                0.0  
            ],  
            "SI": [  
                798,  
                1028  
            ],  
            "SN": [  
                839,  
                901  
            ],  
            "STMI": [  
                833,  
                987  
            ],  
            "STMS": [  
                836,  
                980  
            ],  
            "TRG": [  
                499,  
                854  
            ],  
            "UL": [  
                849,  
                946  
            ]  
        },  
        "metadata": {  
            "alignImg": "{\"height\": 1620}",  
            "attr": {  
                "original_height": 2400,  
                "original_width": 1600,  
                "scale": 0.675  
            },  
            "isTurn": false  
        },  
        "rawData": {  
            "url": "https://XXXXXX.jpg"  
        },  
        "sid": "7312e9ad-852a-424a-8faa-e46e938f22ba"  
    },  
    "sid": "7312e9ad-852a-424a-8faa-e46e938f22ba"  
}
```